---
layout:     post
title:      详解TCP协议
subtitle:   
date:       2017-07-13
author:     DH
header-img: img/post-bg-rwd.jpg 
catalog: true
tags:
    - 计算机网络
    - TCP协议
---
# 概述

TCP协议属于面向连接、可靠的协议。他通过校验和、序列号、确认应答。重发控制等实现可靠的传输。

#### TCP报文头

TCP的报文段首部最长60字节。其中20字节是固定长度的，40字节是可变长度。

以下是TCP首部的格式：

![](https://ws4.sinaimg.cn/large/006tNc79gy1fhikxiis12j30ke0emjsp.jpg)

其中从源端口到紧急指针这一部分是不可变部分，长度是20字节，选项和填充是可变部分，长度最长可达40字节。

#### 源端口和目的端口 

表示端口号

#### 序号

序号表示数据报报文段的第一个字节的序号。

#### 确认号

确认号表示希望接收到的下一个数据报报文段的第一个字节的序号。

#### 数据偏移

数据偏移表示TCP报文段首部的长度

#### URG 

URG=1 表示紧急指针有效，告诉系统本报文段含有紧急数据，应该尽快发出

#### ACK 
ACK = 1 才表示连接有效

#### PSH

表示应该尽快发送，不必等缓冲区装满

#### RST 

重置，表示TCP连接出现了严重的错误，需要释放连接，重新进行连接

#### SYN

建立连接时，需要将其设置为1

#### FIN

释放链接时使用

#### 校验和

检验范围包括首部和数据，检测报文在传输中是否出错

#### 紧急指针

指向紧急数据的最后一个字节的位置

#### 选项和填充

可变长度部分



# TCP连接管理




