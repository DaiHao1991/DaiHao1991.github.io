---
layout:     post
title:      表示数值的字符串
subtitle:   
date:       2017-07-25
author:     DH
header-img: img/post-bg-cook.jpg
catalog: true
tags:
    - 算法
    - 剑指offer
    - 正则表达式
---
#### 题目

>请实现一个函数用来判断字符串是否表示数值（包括整数和小数）。例如，字符串"+100","5e2","-123","3.1416"和"-1E-16"都表示数值。 
但是"12e","1a3.14","1.2.3","+-5"和"12e+4.3"都不是。

#### 分析

网上有很多自己去一步步匹配的，但是我觉得既然Java提供了正则表达式匹配，那么写好正则表达式就好了。

那么我们一步步去匹配：

（1）+和-的匹配。字符串的开头的+和-可以有任何一个或者没有。（-|\\+）? ,-|\\+表示有一个-或+，？表示？之前紧挨着的那个字符的数量是0—n.

（2）[0-9]*   符号位之后可以是e也可以是数字，所以数字的个数是0-n。其中[0-9]表示至少有一个0-9的数字，[0-9]*表示包含0个或者0个以上的[0-9].

这里有一个需要注意的一点是，可能会想-03这种有没有意义，在Java中是可以的，这就是-3。

（3）接下来我们去匹配小数点。 小数点需要注意前面需要转移符。(\\.[0-9]*)？

到目前为止(-|\\+)?[0-9]*(\\.[0-9]*)?是我们求出来的正则表达式。可能会有疑问，加入匹配的是-.03，是不是表示一个数，这是争取的。

可以测试一下：System.out.println(1-.03);输出的是0.97.

（4）接下来去匹配e或者E。当然e或者E也是可有可无的，假如有的话[eE]表示存在其中一个e或者E。

（5）e或者E之后，还可以存在+或者-，因此又有[\\+\\-]?.

（6）e或者E存在的话，之后必须有数字，所以有[0-9]+,表示e或者E之后跟着1个到若干个数字。

（7）从第4到第6步，我们考虑的是e存在情况，整体是(\\.[0-9]*)?([eE][\\+\\-]?[0-9]+)。然而是可以没有科学计数的，所以有
(\\.[0-9]*)?([eE][\\+\\-]?[0-9]+)？  表示括号中的出现次数是0或者1次。


综上分析：

正则表达式是：(-|\\+)?[0-9]*(\\.[0-9]*)?([eE][\\+\\-]?[0-9]+)?

#### 代码

```
public class Solution {
    public boolean isNumeric(char[] str) {
        String string = String.valueOf(str);
		System.out.println(string);
//		return string.matches("[\\+\\-]?[0-9]*(\\.[0-9]*)?([eE][\\+\\-]?[0-9]+)?");
		return string.matches("(-|\\+)?[0-9]*(\\.[0-9]*)?([eE][\\+\\-]?[0-9]+)?");
    }
}		

```


#### 正则表达式

引用网友总结的正则表达式的总结：

两个特殊的符号'^'和'$'。他们的作用是分别指出一个字符串的开始和结束。例子如下：

"^The"：表示所有以"The"开始的字符串（"There"，"The cat"等）；

"of despair$"：表示所以以"of despair"结尾的字符串；

"^abc$"：表示开始和结尾都是"abc"的字符串——呵呵，只有"abc"自己了；

"notice"：表示任何包含"notice"的字符串。


象最后那个例子，如果你不使用两个特殊字符，你就在表示要查找的串在被查找串的任意部分——你并
不把它定位在某一个顶端。


其它还有'*'，'+'和'?'这三个符号，表示一个或一序列字符重复出现的次数。它们分别表示“没有或
更多”，“一次或更多”还有“没有或一次”。下面是几个例子：

"ab*"：表示一个字符串有一个a后面跟着零个或若干个b。（"a", "ab", "abbb",……）；

"ab+"：表示一个字符串有一个a后面跟着至少一个b或者更多；

"ab?"：表示一个字符串有一个a后面跟着零个或者一个b；

"a?b+$"：表示在字符串的末尾有零个或一个a跟着一个或几个b。


你也可以使用范围，用大括号括起，用以表示重复次数的范围。


"ab{2}"：表示一个字符串有一个a跟着2个b（"abb"）；

"ab{2,}"：表示一个字符串有一个a跟着至少2个b；

"ab{3,5}"：表示一个字符串有一个a跟着3到5个b。


请注意，你必须指定范围的下限（如："{0,2}"而不是"{,2}"）。还有，你可能注意到了，'*'，'+'和
'?'相当于"{0,}"，"{1,}"和"{0,1}"。
还有一个'¦'，表示“或”操作：


"hi¦hello"：表示一个字符串里有"hi"或者"hello"；

"(b¦cd)ef"：表示"bef"或"cdef"；

"(a¦b)*c"：表示一串"a""b"混合的字符串后面跟一个"c"；



'.'可以替代任何字符：

"a.[0-9]"：表示一个字符串有一个"a"后面跟着一个任意字符和一个数字；

"^.{3}$"：表示有任意三个字符的字符串（长度为3个字符）；


方括号表示某些字符允许在一个字符串中的某一特定位置出现：

"[ab]"：表示一个字符串有一个"a"或"b"（相当于"a¦b"）；

"[a-d]"：表示一个字符串包含小写的'a'到'd'中的一个（相当于"a¦b¦c¦d"或者"[abcd]"）；

"^[a-zA-Z]"：表示一个以字母开头的字符串；

"[0-9]%"：表示一个百分号前有一位的数字；

",[a-zA-Z0-9]$"：表示一个字符串以一个逗号后面跟着一个字母或数字结束。



你也可以在方括号里用'^'表示不希望出现的字符，'^'应在方括号里的第一位。（如："%[^a-zA-Z]%"表
示两个百分号中不应该出现字母）。

为了逐字表达，你必须在"^.$()¦*+?{\"这些字符前加上转移字符'\'。

